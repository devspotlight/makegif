(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/logo.c38f527d.svg"},26:function(e,t,n){e.exports=n(48)},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),i=(n(31),n(15)),l=n(4),s=n.n(l),u=n(8),m=n(1),d=n(13),f=n.n(d),g=n(12),p=(n(33),n(21)),h=n.n(p),b=function(e){var t=e.handleStopCapture,n=e.isPlaying,c=e.handleError,o=Object(a.useRef)(null),i=Object(a.useRef)(null),l=Object(a.useState)(!1),s=Object(m.a)(l,2),u=s[0],d=s[1],f=Object(a.useState)([]),g=Object(m.a)(f,2),p=g[0],b=g[1],v=Object(a.useCallback)((function(e){var t=e.data;t.size>0&&b((function(e){return e.concat(t)}))}),[b]),E=Object(a.useCallback)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){d(!0),i.current=new MediaRecorder(o.current.stream,{mimeType:"video/webm"}),i.current.addEventListener("dataavailable",v),i.current.start()})).catch((function(e){console.log(e.toString()),c(e)}))}),[o,d,i,v]),O=Object(a.useCallback)((function(){i.current instanceof MediaRecorder&&i.current.stop(),d(!1)}),[i,d]);return Object(a.useEffect)((function(){if(p.length){var e=new Blob(p,{type:"video/webm"});t(e),b([])}}),[p,t]),Object(a.useEffect)((function(){n&&E(),!n&&u&&O()}),[n,u,E,O]),r.a.createElement(h.a,{className:"gif-video",audio:!1,ref:o})},v=n(9),E=n.n(v),O=(n(34),function(e){var t=e.isPlaying,n=e.onFinish,a=e.danger;return r.a.createElement("div",{className:E()("gif-countdown",t&&"playing",a&&"danger"),onAnimationEnd:n})}),w=n(22),j=n.n(w),y=(n(35),function(e){var t=e.className,n=e.children,a=e.header,c=e.headerClassName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:E()("gif-page-container",t)},r.a.createElement("div",{className:E()("gif-page-header",c)},a),n),r.a.createElement("footer",{className:"row"},r.a.createElement("img",{alt:"fostive logo",src:j.a})))}),C=function(e){var t=e.name,n=e.title,a=e.size;return r.a.createElement("i",{className:E()("fa","fa-".concat(t),a&&"fa-".concat(a,"x")),title:n})};C.defaultProps={size:null};var k=C,N=n(23),x=(n(36),function(e){var t=e.children,n=e.className,a=e.disabled,c=e.grey,o=e.icon,i=e.noClick,l=e.onClick,s=e.red,u=e.secondary,m=Object(N.a)(e,["children","className","disabled","grey","icon","noClick","onClick","red","secondary"]);return r.a.createElement("button",Object.assign({onClick:l,className:E()(n,"gif-button",i&&"noclick",a&&"disabled",!u&&"primary",u&&"secondary",c&&"grey",s&&"red")},m),o&&r.a.createElement("div",{className:"button-icon-wrapper"},r.a.createElement(k,{name:o})),t)});x.defaultProps={className:""};var S=x,P=(n(37),function(e){var t=e.title,n=e.message,a=e.content,c=e.ctaLabel,o=e.ctaOnClick,i=e.ctaIcon,l=e.ctaDisabled,s=e.warningIcon;return r.a.createElement("div",{className:"gif-warning column"},r.a.createElement(k,{name:s,size:4}),r.a.createElement("h1",null,t),r.a.createElement("p",null,n),a,r.a.createElement(S,{disabled:l,icon:i,onClick:o,secondary:!0,grey:!0},c))});P.defaultProps={content:null,ctaLabel:null,ctaOnClick:null,ctaIcon:null,ctaDisabled:!1,warningIcon:"exclamation-triangle"};var I=P,F=function(e){var t=e.retry;return r.a.createElement(I,{title:"Uh oh, something went wrong!",message:"Please try again.",ctaOnClick:t,ctaLabel:"Retry",ctaIcon:"undo"})},G=n(2),L=function(){var e=Object(G.g)(),t=Object(a.useState)(null),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(m.a)(i,2),d=l[0],f=l[1],g=function(){var t=Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),(n=new FormData).append("gif",c),t.next=5,fetch("/uploadUserGIF",{method:"POST",body:n});case 5:t.sent.ok&&e.push("/home");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(I,{title:"Direct gif recording is not currently supported in your browser.",message:"Please use the latest versions of Chrome or Firefox for the best experience. Alternatively, you can upload your own 3-second GIF below.",content:r.a.createElement("input",{type:"file",name:"gif",accept:"image/gif",style:{width:"170px"},onChange:function(e){return o(e.target.files[0])}}),ctaLabel:d?"Uploading...":"Upload",ctaOnClick:g,ctaIcon:"upload",ctaDisabled:!c||d})},_="phase_start",T="phase_countdown";var R,D,M=function(e){var t,n=e.history,c=Object(a.useState)(_),o=Object(m.a)(c,2),l=o[0],d=o[1],p=Object(a.useState)(),h=Object(m.a)(p,2),v=h[0],E=h[1],w=Object(a.useState)(),j=Object(m.a)(w,2),C=j[0],N=j[1],x=Object(a.useState)(""),P=Object(m.a)(x,2),I=P[0],G=P[1],R=Object(a.useState)(!1),D=Object(m.a)(R,2),M=D[0],z=D[1],U=Object(a.useState)(!window.MediaRecorder&&"warning_browser"),B=Object(m.a)(U,2),Y=B[0],A=B[1],J=function(){E(null),N(null),G(""),d(_),A(!1)},W=Object(a.useCallback)((function(e){console.error("Error:",e),A("warning_generic")}),[A]),K=Object(a.useCallback)((function(e){var t=new FormData,n=I.length&&340/I.length;t.append("text",I),t.append("fontsize",n),t.append("videoId",v),fetch("/video2gif",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(t){if(!Object.keys(t).length)throw Error;N(t.videoId),e&&e()})).catch(W)}),[N,W,I,v]);Object(a.useEffect)((function(){v&&K()}),[v,K]);var H=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/download?filename=".concat(C));case 2:return t=e.sent,e.next=5,t.blob();case 5:n=e.sent,f()(n,"".concat(C,".gif"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Create Your Own GIF"),r.a.createElement(g.b,{to:"/",className:"gif-button-2"},"Cancel",r.a.createElement(k,{name:"close"}))),q=[_,T].includes(l),Q=!q&&"phase_recording"!==l,V=(t={},Object(i.a)(t,"warning_generic",r.a.createElement(F,{retry:J})),Object(i.a)(t,"warning_browser",r.a.createElement(L,null)),t);return r.a.createElement(y,{className:"gif-create",header:$,headerClassName:"gif-create-header"},Y?V[Y]:r.a.createElement("div",{className:"gif-create-content column"},r.a.createElement("div",{className:"gif-image-container"},C?r.a.createElement("img",{src:"/img?filename=".concat(C,"&reload=").concat("phase_end"===l),alt:"Your GIF",className:"gif-video"}):r.a.createElement(b,{handleStopCapture:function(e){if(e){var t=new FormData;t.append("video",e),fetch("/uploadBlob",{method:"POST",body:t}).then((function(e){return e.ok&&e.json()})).then((function(e){if(!e)throw Error;var t=e.filename.replace(".webm","");E(t)})).catch(W)}},isPlaying:"phase_recording"===l,handleError:function(){return A("warning_generic")}})),q&&r.a.createElement(O,{isPlaying:l===T,onFinish:function(){return d("phase_recording")}}),"phase_recording"===l&&r.a.createElement(O,{isPlaying:!0,onFinish:function(){return d("phase_text")},danger:!0}),!Q&&r.a.createElement(S,{onClick:function(){return d(T)},noClick:l!==_,grey:l===T,red:"phase_recording"===l,icon:l===_?"play":"camera"},l===_&&"Start Recording",l===T&&"Get Ready...",!q&&"Recording..."),"phase_text"===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{placeholder:"Add a caption to your GIF!",onChange:function(e){return G(e.target.value)},value:I}),r.a.createElement("div",{className:"gif-button-group"},r.a.createElement(S,{onClick:function(){return d("phase_end")},secondary:!0,grey:!0},"Skip"),r.a.createElement(S,{disabled:""===I,onClick:function(){return K((function(){return d("phase_end")}))}},"Save Caption"))),"phase_end"===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gif-button-group"},r.a.createElement(S,{icon:"download",onClick:H,disabled:M,secondary:!0,grey:!0},"Download"),r.a.createElement(S,{icon:"undo",onClick:J,disabled:M,secondary:!0,red:!0},"Retry")),r.a.createElement(S,{icon:"share",onClick:function(){z(!0),fetch("/uploadGIF",{method:"POST",body:JSON.stringify({filename:C}),headers:{"Content-Type":"application/json"}}).then((function(){return n.push("/home")})).catch(W)},noClick:M},M?"Uploading...":"Share With Conference"))))};n(43);var z=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/s3-download?filename=".concat(t));case 2:n=e.sent,n.blob().then((function(e){return f()(e,t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=n(25),B=n.n(U),Y=function(){var e=function(){var e=Object(a.useState)(!0),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),o=Object(m.a)(c,2),i=o[0],l=o[1],d=Object(a.useState)([]),f=Object(m.a)(d,2),g=f[0],p=f[1],h=Object(a.useState)(0),b=Object(m.a)(h,2),v=b[0],E=b[1],O=g.length,w=Math.ceil(O/20),j=20*v,y=g.slice(j,j+20),C=function(){D&&clearTimeout(D)};Object(a.useEffect)((function(){return R=!0,k(),function(){R=!1,C()}}),[]);var k=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/listGifs");case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,R){e.next=9;break}return e.abrupt("return");case 9:p(n),l(!1),r(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return{page:v,gifCount:g.length,gifs:y,pageCount:w,start:O>0?j+1:0,end:Math.min(j+20,O),isLoading:i,isInitializing:n,setPage:function(e){C(),i||l(!0),E(e),D=setTimeout((function(){return l(!1)}),500)}}}(),t=e.gifCount,n=e.gifs,c=e.page,o=e.pageCount,i=e.start,l=e.setPage,d=e.end,f=e.isLoading,p=e.isInitializing,h=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,r.a.createElement("h1",null,"Browse GIFs"),!p&&r.a.createElement("h2",null," ".concat(i,"-").concat(d," (").concat(t||0,")"))),!p&&o>1&&r.a.createElement(B.a,{containerClassName:"gif-home-paginate row",pageCount:o,forcePage:c,activeLinkClassName:"active",nextLinkClassName:"gif-button-2 inline",previousLinkClassName:"gif-button-2 inline",pageLinkClassName:"gif-button-2 inline",previousLabel:"Prev",onPageChange:function(e){var t=e.selected;return l(t)},marginPagesDisplayed:1})),b=r.a.createElement("div",{className:"gif-warning column"},r.a.createElement(k,{name:"users",size:4}),r.a.createElement("h1",null,"No Greetings Recorded Yet"),r.a.createElement("p",null,"You could be the first!"));return r.a.createElement(y,{header:h,headerClassName:"gif-home-header"},0===n.length&&!f&&b,f&&r.a.createElement("p",null,"Loading GIFs..."),r.a.createElement("div",{className:"gif-cards-container"},r.a.createElement("div",{className:"gif-home-createnew"},r.a.createElement(g.b,{to:"/new-gif",className:"gif-createnew-button"},r.a.createElement(S,{icon:"plus"},"Create Your Own GIF"))),!f&&n.map((function(e){var t=e.Key,n=e.Location;return r.a.createElement("img",{onClick:function(){return z(t)},key:t,src:n,alt:"GIF ".concat(t),className:"gif-card-image",width:"320",height:"240"})}))))},A=(n(47),function(){var e=Object(a.useState)(!0),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(m.a)(o,2),l=i[0],d=i[1],f=Object(a.useState)(null),g=Object(m.a)(f,2),p=g[0],h=g[1],b=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,fetch("/createGroupPhoto",{method:"POST",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,h(n),d(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getGroupPhoto",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).Contents.length>0&&h(n.Contents[0]),c(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){v()}),[]);var E=r.a.createElement("h1",null,"Create Group Photo"),O=p?"Redo Group Photo":"Make Group Photo";return l&&(O="Making Group Photo..."),n&&(O="Loading..."),r.a.createElement(y,{header:E},r.a.createElement("div",{className:"gif-groupphoto-content column"},r.a.createElement("div",{className:"gif-image-container"},p&&r.a.createElement("img",{src:"".concat(null===p||void 0===p?void 0:p.Location,"?LastModified=").concat(null===p||void 0===p?void 0:p.LastModified),alt:"Group Snapshot",className:"gif-groupphoto-image"})),r.a.createElement("div",{className:"gif-button-group"},r.a.createElement(S,{disabled:l||n,onClick:b},O),r.a.createElement(S,{grey:!0,secondary:!0,icon:"download",disabled:!p,onClick:function(){return z(null===p||void 0===p?void 0:p.Key)}},"Download"))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g.a,null,r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/home",component:Y}),r.a.createElement(G.b,{exact:!0,path:"/new-gif",component:M}),r.a.createElement(G.b,{exact:!0,path:"/group-photo",component:A}),r.a.createElement(G.b,{exact:!0,path:"/"},r.a.createElement(G.a,{to:"/home"})),r.a.createElement(G.b,{component:function(){var e=Object(G.g)();return r.a.createElement("div",{className:"full-center"},r.a.createElement(I,{title:"404",message:"Uh oh, looks like we took a wrong turn.",ctaLabel:"Back To Home",ctaOnClick:function(){return e.push("/home")},ctaIcon:"home",warningIcon:"folder-open"}))}}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);